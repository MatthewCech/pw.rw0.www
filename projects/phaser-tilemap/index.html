<!DOCTYPE html>
<html>
    <head>
        <!-- meta tags -->
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- external links -->
        <script type="text/javascript" src="resources/js/phaser.min.js"></script>

        <!-- page config -->
        <title>Boilerplate</title>
    </head>
    <style>
    body {
        margin: 0px;
        padding: 0px;
    }
    </style>
    <body>
        <script>

        var game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update});

        var map;
        var layer;
        var player;

        // Preload information
        function preload() {
            game.load.tilemap('map', 'assets/TileData.csv', null, Phaser.Tilemap.CSV);
            game.load.image('tiles', 'assets/Tiles.png');
        	game.load.image('player', 'assets/Player.png');
        }

        // Crearte initial tilemap information
        function create() {
        	// Get map stuff in the world and add collision
            map = game.add.tilemap('map', 16, 16);
            map.addTilesetImage('tiles');
            layer = map.createLayer(0);
			map.setCollisionBetween(1, 16, true, layer); // Range from tile 1 to 16

			// Add player
            player = game.add.sprite(32, 32, 'player');

            // Enable Collisions for the player
            game.physics.enable(player, Phaser.Physics.ARCADE);
            player.body.setSize(32, 32, 0, 0);
        }

        function update() {
        	game.physics.arcade.collide(player, layer);
        	if(game.input.keyboard.isDown(Phaser.Keyboard.W))
        		player.body.velocity.y = -100;
        }

        </script>
    </body>
</html>